---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import GrayFooter from '../components/GrayFooter.astro';
import FormattedDate from '../components/FormattedDate.astro';


type Props = CollectionEntry<'podcast'>['data'];

const { title, cover, pubDate, shownotes, audio } = Astro.props;
console.log(audio);

---

<html lang="en">
<head>
    <BaseHead title={title} description={title}/>
    <style>
        main {
            background-color: rgb(var(--gray-super-light));
        }
        .sidebar {
            flex: 0 0 25%;
            padding-right: 3em;
            border-right: 1px solid rgb(var(--gray-light));
            /* stick the sidebar*/
            position: sticky;
            top: 0;
            height: calc(100vh - 4em);
        }
        .sidebar audio {
            width: 100%;
            height: 3em;
            margin-top: 1em;
            margin-bottom: 1em;
            border: 1px solid rgb(var(--black));
            border-radius: 15px;
        }
        audio::-webkit-media-controls-panel {
            background-color: rgb(var(--gray-super-light));
        }
        .sidebar .title {
            font-size: var(--header-text-font);
            padding-left: 0.3em;
        }
        .sidebar .date {
            padding-top: 0.3em;
            padding-left: 0.3em;
            font-size: var(--normal-text-font);
            color: rgb(var(--gray));
        }
        .shownotes {
            padding-left: 3em;
        }

    </style>
</head>
<body>
    <Header />
    <main>
        <aside class="sidebar">
            <img class="cover" src={cover} alt={`Cover image for ${title}`} />
            <audio controls src={audio} controlslist="nodownload">
                Your browser does not support the audio element.
            </audio>
            <div class="title">{title}</div>
            <div class="date"><FormattedDate isoDate={pubDate} /></div>
        </aside>
        <div class="shownotes" set:html={shownotes}></div>
    </main>
    <GrayFooter />
    
</body>
</html>